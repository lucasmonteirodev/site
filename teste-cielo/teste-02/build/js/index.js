"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var index=function(){var o={current:0,indication:""},n=[];function a(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?"":e[1]}function t(e,t){e&&t&&($(e).closest(".current").attr("data-selected",t),$(".current .answer").removeClass("selected"),$(e).addClass("selected")),setTimeout(function(){var t,e;o.current<7?r("next"):r("next")&&(t=[],e=_toConsumableArray(document.querySelectorAll(".question_wrapper")).slice(1,6).reduce(function(e,t){return e[t.dataset.selected]++,e},{A:0,B:0,C:0,D:0}),(e=Object.entries(e)).sort(function(e,t){return e[1]<t[1]?1:-1}),t.push(e[0][0]),2===e[0][1]&&2===e[1][1]&&t.push(e[1][0]),$("#input-result").val(resultados.find(function(e){return e.id===t.sort().join("")}).title),o.indication=t.sort().join(""),document.forms.questions,$("#quis").hide(),$("#loader_screen").fadeIn(),$("body").addClass("loader"),setTimeout(function(){$("#loader_subs").text("Buscando o vinho perfeito"),setTimeout(function(){$("#loader_subs").text("Encontramos seu match!"),setTimeout(function(){$("body").removeClass("loader"),$("#loader_screen").hide(),$("body").addClass("match"),$("#match_screen").fadeIn(),$('.match[data-club="'.concat(o.indication,'"]')).addClass("current"),$('.match[data-club="'.concat(o.indication,'"]')).show(),$('.match[data-club="'.concat(o.indication,'"]')).find(".slider").slick("refresh")},3e3)},3e3)},3e3))},500)}function s(e){var e=document.querySelector(e),t=e.closest(".input_control"),r=!1;return e.checkValidity()?t.classList.remove("error"):(t.classList.add("error"),r=!0),r}function r(e){var t=$(".question_wrapper.current"),r=t.prev(),n=t.next();if(0===o.current?s("#username"):6===o.current?s("#useremail"):7===o.current&&s("#userphone"),"prev"===e)o.current--,t.removeClass("current"),t.addClass("next"),r.removeClass("prev"),r.addClass("current"),+t.attr("visited")?$("#next_question").addClass("active"):$("#next_question").removeClass("active");else{if(0===o.current){if(s("#username"))return}else if(6===o.current){if(s("#useremail"))return}else if(7===o.current&&s("#userphone"))return;o.current++,t.removeClass("current"),t.addClass("prev"),n.removeClass("next"),n.addClass("current"),n.attr("visited",1),+n.next().attr("visited")?$("#next_question").addClass("active"):$("#next_question").removeClass("active")}return 0===o.current?$("#prev_question").removeClass("active"):$("#prev_question").addClass("active"),e=$("#progress_dots > li"),r=$($("#progress_dots > li")[o.current]),e.removeClass("active"),r.addClass("active"),1}function e(){$("#userphone").mask("(00) 00000-0000");var e=0;$("#username").on("input",function(r){clearTimeout(e),e=setTimeout(function(){var e=r.currentTarget,t=e.closest(".input_control");t.classList.remove("error"),e.checkValidity()||t.classList.add("error")},1e3)}),$("#btn_match_yes").on("click",function(){var e=$(".match.current").attr("data-club");window.location.href=function(e){var t=a("cupom"),r={A:"tinto-leve",B:"tinto-intenso",C:"versateis",D:"branco-leve",AB:"tinto-leve-tinto-intenso",AC:"tinto-leve-versateis",AD:"tinto-leve-branco-leve",BC:"tinto-intenso-versateis",BD:"tinto-intenso-branco-leve",CD:"branco-leve-versateis"};if(r[e])return"https://www.wine.com.br/clubew/assinatura/".concat(r[e]).concat(t?"?cupom=".concat(t):"","#/planos")}(e)}),$("#btn_match_no").on("click",function(){var e=$(".match.current"),t={},t=e.next().length?e.next():$(".club_wraper > .match").first();e.hide(),e.removeClass("current"),t.addClass("current"),t.fadeIn(200),t.find(".slider").slick("refresh"),$("html,body").animate({scrollTop:$("body").offset().top},500)}),$("#questions").on("click",".current .answer",function(e){e=e.currentTarget;t(e,e.dataset.answer)}),$("#prev_question, #next_question").on("click",function(e){e=e.currentTarget.dataset.op;0<=o.current&&o.current<=7&&("prev"===e&&0===o.current||"next"===e&&7===o.current||r(e))}),$(".btn_pronto").on("click",function(e){setTimeout(function(){t()},500)}),$(".options ul .card").click(function(){var e=$(this),t=this.id,r=e.find("input");n.includes(t)?(e.removeClass("active"),r.prop("checked",!1),n=n.filter(function(e){return e!==t})):(n.push(t),e.addClass("active"),r.prop("checked",!0),2<n.length&&((e=$("#".concat(n.shift()))).removeClass("active"),e.find("input").prop("checked",!1))),n.length?$(".ctaProsseguir").addClass("active"):$(".ctaProsseguir").removeClass("active")}),$(".ctaProsseguir").click(function(){(e=n).includes("opcao-4")&&(cluster="CLUSTER4"),e.includes("opcao-3")&&(cluster="CLUSTER5",e.includes("opcao-4")&&(cluster="CLUSTER6")),e.includes("opcao-2")&&(cluster="CLUSTER2",e.includes("opcao-3")?cluster="CLUSTER9":e.includes("opcao-4")&&(cluster="CLUSTER10")),e.includes("opcao-1")&&(cluster="CLUSTER1",e.includes("opcao-2")?cluster="CLUSTER3":e.includes("opcao-3")?cluster="CLUSTER7":e.includes("opcao-4")&&(cluster="CLUSTER8"));var e,t=cluster;resultados.forEach(function(e){e.cluster===t&&((cupom=a("cupom"))?window.open(e.url+"/?cupom="+cupom,"_self"):window.open(e.url,"_self"))})}),$("body").on("keydown",function(e){if("Tab"===e.key)return!1})}return{init:function(){Modal.init(),$(".slider").slick({arrows:!1,dots:!1,fade:!1,infinite:!1,speed:1e3,autoplay:!1,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:768,settings:{dots:!0,slidesToShow:1.2}}]}),e()}}}();document.addEventListener("DOMContentLoaded",index.init);