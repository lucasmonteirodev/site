"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,a,e){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"==typeof Meteor?module.exports=t(require("jquery")):t(a||e)}(function(i){function l(p,b,w){var C={invalid:[],getCaret:function(){try{var t,a=0,e=p.get(0),n=document.selection,s=e.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=n.createRange()).moveStart("character",-C.val().length),a=t.text.length):!s&&"0"!==s||(a=s),a}catch(t){}},setCaret:function(t){try{if(p.is(":focus")){var a,e=p.get(0);e.setSelectionRange?e.setSelectionRange(t,t):((a=e.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(t){}},events:function(){p.on("keydown.mask",function(t){p.data("mask-keycode",t.keyCode||t.which),p.data("mask-previus-value",p.val()),p.data("mask-previus-caret-pos",C.getCaret()),C.maskDigitPosMapOld=C.maskDigitPosMap}).on(i.jMaskGlobals.useInput?"input.mask":"keyup.mask",C.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){p.keydown().keyup()},100)}).on("change.mask",function(){p.data("changed",!0)}).on("blur.mask",function(){o===C.val()||p.data("changed")||p.trigger("change"),p.data("changed",!1)}).on("blur.mask",function(){o=C.val()}).on("focus.mask",function(t){!0===w.selectOnFocus&&i(t.target).select()}).on("focusout.mask",function(){w.clearIfNotMatch&&!r.test(C.val())&&C.val("")})},getRegexMask:function(){for(var t,a,e,n,s,r,o=[],i=0;i<b.length;i++)(t=j.translation[b.charAt(i)])?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=t.optional,(n=t.recursive)?(o.push(b.charAt(i)),s={digit:b.charAt(i),pattern:a}):o.push(e||n?a+"?":a)):o.push(b.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=o.join(""),s&&(r=r.replace(new RegExp("("+s.digit+"(.*"+s.digit+")?)"),"($1)?").replace(new RegExp(s.digit,"g"),s.pattern)),new RegExp(r)},destroyEvents:function(){p.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(t){var a=p.is("input")?"val":"text";return 0<arguments.length?(p[a]()!==t&&p[a](t),p):p[a]()},calculateCaretPosition:function(t){var a=C.getMasked(),e=C.getCaret();if(t!==a){var n=p.data("mask-previus-caret-pos")||0,s=a.length,r=t.length,o=0,i=0,l=0,c=0,u=0;for(u=e;u<s&&C.maskDigitPosMap[u];u++)i++;for(u=e-1;0<=u&&C.maskDigitPosMap[u];u--)o++;for(u=e-1;0<=u;u--)C.maskDigitPosMap[u]&&l++;for(u=n-1;0<=u;u--)C.maskDigitPosMapOld[u]&&c++;if(r<e)e=10*s;else if(e<=n&&n!==r){if(!C.maskDigitPosMapOld[e]){var f=e;e-=c-l,e-=o,C.maskDigitPosMap[e]&&(e=f)}}else n<e&&(e+=l-c,e+=i)}return e},behaviour:function(t){t=t||window.event,C.invalid=[];var a=p.data("mask-keycode");if(-1===i.inArray(a,j.byPassKeys)){var e=C.getMasked(),n=C.getCaret(),s=p.data("mask-previus-value")||"";return setTimeout(function(){C.setCaret(C.calculateCaretPosition(s))},i.jMaskGlobals.keyStrokeCompensation),C.val(e),C.setCaret(n),C.callbacks(t)}},getMasked:function(t,a){var e,n,s,r=[],o=void 0===a?C.val():a+"",i=0,l=b.length,c=0,u=o.length,f=1,p="push",k=-1,d=0,h=[];for(n=w.reverse?(p="unshift",f=-1,e=0,i=l-1,c=u-1,function(){return-1<i&&-1<c}):(e=l-1,function(){return i<l&&c<u});n();){var v=b.charAt(i),m=o.charAt(c),g=j.translation[v];g?(m.match(g.pattern)?(r[p](m),g.recursive&&(-1===k?k=i:i===e&&i!==k&&(i=k-f),e===k&&(i-=f)),i+=f):m===s?(d--,s=void 0):g.optional?(i+=f,c-=f):g.fallback?(r[p](g.fallback),i+=f,c-=f):C.invalid.push({p:c,v:m,e:g.pattern}),c+=f):(t||r[p](v),m===v?(h.push(c),c+=f):(s=v,h.push(c+d),d++),i+=f)}var y=b.charAt(e);l!==u+1||j.translation[y]||r.push(y);var M=r.join("");return C.mapMaskdigitPositions(M,h,u),M},mapMaskdigitPositions:function(t,a,e){var n=w.reverse?t.length-e:0;C.maskDigitPosMap={};for(var s=0;s<a.length;s++)C.maskDigitPosMap[a[s]+n]=1},callbacks:function(t){function a(t,a,e){"function"==typeof w[t]&&a&&w[t].apply(this,e)}var e=C.val(),n=e!==o,s=[e,t,p,w];a("onChange",!0==n,s),a("onKeyPress",!0==n,s),a("onComplete",e.length===b.length,s),a("onInvalid",0<C.invalid.length,[e,t,p,C.invalid,w])}};p=i(p);var r,j=this,o=C.val();b="function"==typeof b?b(C.val(),void 0,p,w):b,j.mask=b,j.options=w,j.remove=function(){var t=C.getCaret();return j.options.placeholder&&p.removeAttr("placeholder"),p.data("mask-maxlength")&&p.removeAttr("maxlength"),C.destroyEvents(),C.val(j.getCleanVal()),C.setCaret(t),p},j.getCleanVal=function(){return C.getMasked(!0)},j.getMaskedVal=function(t){return C.getMasked(!1,t)},j.init=function(t){if(t=t||!1,w=w||{},j.clearIfNotMatch=i.jMaskGlobals.clearIfNotMatch,j.byPassKeys=i.jMaskGlobals.byPassKeys,j.translation=i.extend({},i.jMaskGlobals.translation,w.translation),j=i.extend(!0,{},j,w),r=C.getRegexMask(),t)C.events(),C.val(C.getMasked());else{w.placeholder&&p.attr("placeholder",w.placeholder),p.data("mask")&&p.attr("autocomplete","off");for(var a=0,e=!0;a<b.length;a++){var n=j.translation[b.charAt(a)];if(n&&n.recursive){e=!1;break}}e&&p.attr("maxlength",b.length).data("mask-maxlength",!0),C.destroyEvents(),C.events();var s=C.getCaret();C.val(C.getMasked()),C.setCaret(s)}},j.init(!p.is("input"))}i.maskWatchers={};function a(){var t=i(this),a={},e="data-mask-",n=t.attr("data-mask");if(t.attr(e+"reverse")&&(a.reverse=!0),t.attr(e+"clearifnotmatch")&&(a.clearIfNotMatch=!0),"true"===t.attr(e+"selectonfocus")&&(a.selectOnFocus=!0),c(t,n,a))return t.data("mask",new l(this,n,a))}var c=function(t,a,e){e=e||{};var n=i(t).data("mask"),s=JSON.stringify,r=i(t).val()||i(t).text();try{return"function"==typeof a&&(a=a(r)),"object"!==_typeof(n)||s(n.options)!==s(e)||n.mask!==a}catch(t){}};i.fn.mask=function(t,a){a=a||{};function e(){if(c(this,t,a))return i(this).data("mask",new l(this,t,a))}var n=this.selector,s=i.jMaskGlobals,r=s.watchInterval,o=a.watchInputs||s.watchInputs;return i(this).each(e),n&&""!==n&&o&&(clearInterval(i.maskWatchers[n]),i.maskWatchers[n]=setInterval(function(){i(document).find(n).each(e)},r)),this},i.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},i.fn.unmask=function(){return clearInterval(i.maskWatchers[this.selector]),delete i.maskWatchers[this.selector],this.each(function(){var t=i(this).data("mask");t&&t.remove().removeData("mask")})},i.fn.cleanVal=function(){return this.data("mask").getCleanVal()},i.applyDataMask=function(t){((t=t||i.jMaskGlobals.maskElements)instanceof i?t:i(t)).filter(i.jMaskGlobals.dataMaskAttr).each(a)};var t,e,n,s={maskElements:"input,td,span,div",dataMaskAttr:"[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(t="input",n=document.createElement("div"),(e=(t="on"+t)in n)||(n.setAttribute(t,"return;"),e="function"==typeof n[t]),n=null,e),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};i.jMaskGlobals=i.jMaskGlobals||{},(s=i.jMaskGlobals=i.extend(!0,{},s,i.jMaskGlobals)).dataMask&&i.applyDataMask(),setInterval(function(){i.jMaskGlobals.watchDataMask&&i.applyDataMask()},s.watchInterval)},window.jQuery,window.Zepto);